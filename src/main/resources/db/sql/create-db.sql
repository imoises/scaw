DROP TABLE TEXTO IF EXISTS CASCADE;
DROP TABLE USUARIO IF EXISTS CASCADE;
DROP TABLE ACTIVIDAD IF EXISTS CASCADE;
DROP TABLE PASSWORD_VIEJO IF EXISTS CASCADE;
DROP TABLE SEGURIDAD IF EXISTS CASCADE;
DROP TABLE PREGUNTA IF EXISTS CASCADE;
DROP TABLE SEGURIDAD_PREGUNTA IF EXISTS CASCADE;


CREATE TABLE USUARIO(
	  	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,
	  	NICKNAME	 VARCHAR (30),
		NOMBRE       VARCHAR (30),
		APELLIDO     VARCHAR (30),
		EMAIL        VARCHAR (30),
		PASSWORD     VARCHAR (200),
		ROL          VARCHAR (20),
		ESTADO       VARCHAR (15)
);

CREATE TABLE ACTIVIDAD(
	 	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
		DESCRIPCION VARCHAR(200),
		FECHA  timestamp,
		ID_USUARIO INTEGER,
		FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE TEXTO(
	 	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
		DESCRIPCION VARCHAR(200),
		ID_USUARIO INTEGER,
		FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE PASSWORD_VIEJO(
	 	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
		PASSWORD VARCHAR(200),
		FECHA  timestamp,
		ID_USUARIO INTEGER,
		FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);

CREATE TABLE SEGURIDAD(
	 	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
		RESPUESTA VARCHAR(200),
		ID_USUARIO INTEGER,
		FOREIGN KEY (ID_USUARIO) REFERENCES USUARIO(ID)
);
CREATE TABLE PREGUNTA(
	 	ID INTEGER GENERATED BY DEFAULT AS IDENTITY(START WITH 1, INCREMENT BY 1) PRIMARY KEY,	
		PREGUNTA VARCHAR(200)
);

CREATE TABLE SEGURIDAD_PREGUNTA(
		ID_SEGURIDAD INTEGER,
		ID_PREGUNTA INTEGER,
		PRIMARY KEY(ID_SEGURIDAD, ID_PREGUNTA),
		FOREIGN KEY (ID_SEGURIDAD)  REFERENCES SEGURIDAD (ID),
		FOREIGN KEY (ID_PREGUNTA)  REFERENCES PREGUNTA (ID)
);




